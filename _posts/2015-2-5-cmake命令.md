---
layout: post
title: CMake命令
category: blog
description: 各种命令的学习
---

CMake命令
=========

prject
------

usage:
	project(<PROJECT-NAME> [LANGUAGES] [<language-name>...])
	project(<PROJECT-NAME>
	        [VERSION <major>[.<minor>[.<patch>[.<tweak>]]]]
	        [LANGUAGES <language-name>...])
	        
example: project(NE10 C CXX ASM)

note: 设置整个工程的名称,版本,以及支持的编程语言.一旦PROJECT-NAME被设置以后,以下变量会自动生成.
	PROJECT_NAME
	PROJECT_SOURCE_DIR, <PROJECT-NAME>_SOURCE_DIR
	PROJECT_BINARY_DIR, <PROJECT-NAME>_BINARY_DIR

如果VERSION被设置,以下变量会自动生成.
	PROJECT_VERSION, <PROJECT-NAME>_VERSION
	PROJECT_VERSION_MAJOR, <PROJECT-NAME>_VERSION_MAJOR
	PROJECT_VERSION_MINOR, <PROJECT-NAME>_VERSION_MINOR
	PROJECT_VERSION_PATCH, <PROJECT-NAME>_VERSION_PATCH
	PROJECT_VERSION_TWEAK, <PROJECT-NAME>_VERSION_TWEAK

option
-------

usage：option(<option_variable> "help string describing option" [initial value])

example：OPTION(TEST_BUILD_SHARED "是否构建动态库" ON)

Note: 指定CMake的编译选项，注意这里的选项只是给CMake看的，只在CMakelists.txt里面有效，与程序无关。

add_subdirectory
----------------

usage: add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])

example: add_subdirectory(test)

note: 指定需要编译的子目录。子目录source_dir里面包含了CMakeLists.txt和相关的源代码。source_dir可以是相对当前目录的路径，也可以是绝对路径，一般用相对路径。

binary_dir指定子目录编译后的输出文件的存储目录。如果为空，则用source_dir代替。

如果指定了EXCLUDE_FROM_ALL，说明这个子目录编译出来的目标将不包括在主CMakeLists.txt的ALL目标里面。这个在某些情况下非常有用，比如这个子目录是一个与主工程不太相关的部分，像测试工程等。

当CMake执行到add_subdirectory指令时，立即跳转到子目录的CMakeLists.txt里面去执行，等执行完成返回后接着运行下面的指令。

message
--------
usage: message([<mode>] "message to display" ...)

example: MESSAGE(STATUS "${PROJECT_BINARY_DIR}")

note: <mode>有以下类型:

	(none)         = 重要信息
	STATUS         = 突发信息
	WARNING        = 警告信息.跳过继续处理
	AUTHOR_WARNING = 警告信息(dev).跳过继续处理
	SEND_ERROR     = 错误信息, 跳过继续处理,但是忽略生成
	FATAL_ERROR    = 错误信息, 停止处理
	DEPRECATION    = 反对点信息.如果指定了CMAKE_ERROR_DEPRECATED或者CMAKE_WARN_DEPRECATED,可以输出这种消息.如果没有,则不输出消息

